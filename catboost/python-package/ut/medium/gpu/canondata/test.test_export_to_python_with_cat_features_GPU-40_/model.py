### Types to hold CTR's data

class catboost_model_ctr(object):
    def __init__(self, base_hash, base_ctr_type, target_border_idx, prior_num, prior_denom, shift, scale):
        self.base_hash = base_hash
        self.base_ctr_type = base_ctr_type
        self.target_border_idx = target_border_idx
        self.prior_num = prior_num
        self.prior_denom = prior_denom
        self.shift = shift
        self.scale = scale

    def calc(self, count_in_class, total_count):
        ctr = (count_in_class + self.prior_num) / float(total_count + self.prior_denom)
        return (ctr + self.shift) * self.scale


class catboost_bin_feature_index_value(object):
    def __init__(self, bin_index, check_value_equal, value):
        self.bin_index = bin_index
        self.check_value_equal = check_value_equal
        self.value = value


class catboost_ctr_mean_history(object):
    def __init__(self, sum, count):
        self.sum = sum
        self.count = count


class catboost_ctr_value_table(object):
    def __init__(self, index_hash_viewer, target_classes_count, counter_denominator, ctr_mean_history, ctr_total):
        self.index_hash_viewer = index_hash_viewer
        self.target_classes_count = target_classes_count
        self.counter_denominator = counter_denominator
        self.ctr_mean_history = ctr_mean_history
        self.ctr_total = ctr_total

    def resolve_hash_index(self, hash):
        try:
            return self.index_hash_viewer[hash]
        except KeyError:
            return None


class catboost_ctr_data(object):
    def __init__(self, learn_ctrs):
        self.learn_ctrs = learn_ctrs


class catboost_projection(object):
    def __init__(self, transposed_cat_feature_indexes, binarized_indexes):
        self.transposed_cat_feature_indexes = transposed_cat_feature_indexes
        self.binarized_indexes = binarized_indexes


class catboost_compressed_model_ctr(object):
    def __init__(self, projection, model_ctrs):
        self.projection = projection
        self.model_ctrs = model_ctrs


class catboost_model_ctrs_container(object):
    def __init__(self, used_model_ctrs_count, compressed_model_ctrs, ctr_data):
        self.used_model_ctrs_count = used_model_ctrs_count
        self.compressed_model_ctrs = compressed_model_ctrs
        self.ctr_data = ctr_data


###  Model data
class catboost_model(object):
    float_features_index = [
        0, 1, 2, 3, 5,
    ]
    float_feature_count = 6
    cat_feature_count = 11
    binary_feature_count = 33
    tree_count = 40
    float_feature_borders = [
        [30.5, 33.5, 36.5, 37.5, 41.5, 46.5, 50, 51.5, 60.5, 61.5],
        [66768, 129787.5, 132707.5, 168783.5, 181845, 202819.5, 203488.5, 215061, 215992, 218145.5, 222939, 240620.5, 318173.5, 325462, 337225.5, 380248],
        [8, 9.5, 10.5, 12.5, 13.5],
        [3280],
        [31.5, 34, 35.5, 46.5],
    ]
    tree_depth = [6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6]
    tree_split_border = [6, 3, 1, 9, 1, 255, 2, 1, 2, 1, 3, 4, 2, 5, 3, 6, 1, 1, 1, 1, 4, 3, 15, 3, 1, 4, 14, 2, 9, 2, 3, 3, 9, 2, 1, 255, 3, 3, 4, 8, 1, 4, 2, 3, 3, 5, 1, 4, 3, 2, 255, 3, 4, 11, 1, 3, 3, 2, 1, 2, 4, 1, 15, 5, 13, 1, 1, 3, 1, 4, 255, 10, 1, 1, 3, 2, 16, 2, 1, 4, 3, 2, 4, 5, 1, 2, 1, 255, 1, 2, 2, 3, 1, 5, 3, 1, 1, 2, 4, 6, 4, 1, 1, 1, 4, 5, 6, 4, 1, 4, 4, 3, 3, 1, 4, 1, 255, 1, 1, 2, 2, 3, 4, 3, 2, 255, 1, 3, 3, 2, 1, 2, 1, 3, 2, 3, 3, 8, 1, 2, 5, 3, 2, 3, 1, 5, 3, 1, 10, 8, 2, 3, 1, 3, 8, 2, 5, 5, 5, 4, 3, 3, 4, 2, 5, 3, 3, 4, 2, 4, 3, 2, 1, 10, 5, 15, 1, 4, 3, 4, 3, 3, 5, 3, 7, 3, 2, 255, 2, 2, 1, 2, 2, 2, 4, 1, 3, 1, 6, 4, 1, 2, 1, 7, 2, 1, 12, 5, 1, 5, 1, 1, 2, 6, 1, 3, 4, 1, 5, 4, 1, 3, 1, 9, 3, 5, 4, 2, 4, 1, 3, 4, 2, 15, 1, 4, 3, 5, 2, 3]
    tree_split_feature_index = [16, 6, 11, 0, 3, 5, 9, 14, 13, 15, 2, 9, 16, 0, 11, 6, 0, 31, 3, 17, 4, 2, 1, 13, 14, 2, 1, 32, 1, 1, 16, 6, 0, 29, 20, 5, 0, 23, 21, 0, 19, 10, 24, 7, 22, 0, 10, 19, 16, 28, 5, 32, 4, 1, 16, 2, 18, 23, 8, 29, 4, 17, 1, 6, 1, 32, 17, 2, 30, 13, 5, 1, 17, 0, 13, 18, 1, 2, 17, 0, 26, 11, 11, 9, 17, 12, 3, 5, 1, 13, 16, 10, 13, 18, 0, 4, 17, 22, 13, 1, 4, 23, 3, 29, 24, 2, 0, 13, 17, 21, 4, 13, 24, 12, 4, 3, 5, 21, 26, 16, 7, 25, 1, 13, 10, 5, 17, 13, 9, 19, 22, 20, 17, 0, 32, 2, 21, 1, 17, 26, 9, 9, 21, 0, 3, 2, 1, 7, 1, 0, 16, 21, 27, 25, 1, 13, 16, 2, 9, 4, 13, 10, 16, 2, 9, 2, 21, 13, 16, 4, 19, 8, 25, 0, 2, 1, 1, 12, 12, 4, 16, 2, 11, 0, 0, 4, 23, 5, 4, 2, 25, 29, 6, 26, 4, 3, 25, 22, 16, 11, 23, 12, 9, 1, 9, 3, 1, 1, 18, 2, 3, 24, 31, 6, 28, 25, 4, 17, 0, 18, 6, 28, 17, 1, 2, 24, 6, 15, 4, 2, 25, 18, 25, 1, 3, 4, 15, 2, 0, 18]
    tree_split_xor_mask = [0, 0, 0, 0, 0, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 254, 0, 0, 0, 0, 0, 0, 0, 0, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    cat_features_index = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    one_hot_cat_feature_index = [9]
    one_hot_hash_values = [
        [-1291328762]
    ]
    ctr_feature_borders = [
        [0.0545212775, 0.381648958, 0.599734068, 0.654255331, 0.708776593, 0.763297915],
        [0.203571424, 0.669642866, 0.773214281],
        [0.800000012, 0.850000024],
        [0.0294117667, 0.0539215691, 0.0637254938, 0.0784313753, 0.377451003],
        [0.286458343, 0.34375, 0.515625, 0.859375],
        [0.471354157, 0.604166627, 0.6484375, 0.78125, 0.869791627],
        [0.625, 0.700000048, 0.8125, 0.887500048],
        [0.0147058833, 0.142156869, 0.191176474, 0.235294133],
        [0.608108103],
        [0.471621633, 0.600337863, 0.771959484],
        [0.662500024, 0.700000048, 0.737500012, 0.774999976, 0.8125, 0.925000072],
        [0.387254894],
        [0.346153855, 0.403846145, 0.461538464, 0.634615362, 0.865384638],
        [0.561298072, 0.605769217, 0.872596145, 0.917067289],
        [0.75, 0.84375],
        [0.0539215691, 0.102941178, 0.117647067, 0.142156869],
        [0.417613626, 0.477272719, 0.715909064],
        [0.497869313, 0.657670498, 0.764204562],
        [0.4375, 0.578125, 0.625, 0.765625, 0.953125],
        [0.0343137272, 0.0931372568, 0.284313738],
        [0.6875, 0.744791687, 0.802083373],
        [0.815104127],
        [0.7421875, 0.7890625, 0.8828125],
        [0.0882352963, 0.460784316],
        [0.805921078],
        [0.734375, 0.838541687],
        [0.6875, 0.833333373, 0.958333373]
    ]

    ## Aggregated array of leaf values for trees. Each tree is represented by a separate line:
    leaf_values = [
        0.7821782231330872, 0.7838118672370911, 0.7821782231330872, 0.7821782231330872, 0.7763118743896484, 0.7845792174339294, 0.7854455709457397, 0.7877793312072754, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7838118672370911, 0.7821782231330872, 0.7838118672370911, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7727921009063721, 0.7821782231330872, 0.7687694430351257, 0.7859123349189758, 0.7732013463973999, 0.7859123349189758, 0.7823672294616699, 0.7878960371017456, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7838118672370911, 0.7763118743896484, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7763118743896484, 0.7821782231330872, 0.7727921009063721, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7821782231330872, 0.7727921009063721, 0.7821782231330872,
        0, 0, 0, 0, -0.009297078475356102, 0.001700989902019501, 0, 0, 0.001621410949155688, 0.001621410949155688, 0, 0.002585049252957106, -0.005799009930342436, -0.005795940756797791, 0.001615655841305852, 0.003653571242466569, -0.009294623509049416, -0.003251824760809541, 0, 0, -0.005822339095175266, 0, 0, 0, -0.005799009930342436, 0, 0, 0.001605657394975424, 0, 0, 0.002545947907492518, 0.001621410949155688, 0, 0.002611593110486865, 0, 0, 0, 0.001236180076375604, 0, 0, 0, 0.003219705540686846, 0, 0.004242468159645796, 0, -0.0001582589757163078, 0, 0.005418002139776945, 0, -0.009251824580132961, 0, 0, 0, -0.003349425969645381, 0, 0, 0, -0.01034590601921082, 0, 0.003671074751764536, 0, -0.003344227792695165, 0, 0.005021915771067142,
        -0.005729621276259422, 0.002586163347586989, 0, 0, 0, 0.002540178829804063, 0, 0, 0, 0, 0, 0, 0.003716115141287446, 0.003131901612505317, 0, 0, 0, 0.001581509481184185, -0.001592128886841238, -0.005806750152260065, 0, 0, -0.003232839517295361, 0, 0, 0.001591966603882611, 0, 0.002609100891277194, -0.0057708197273314, 0.002485684584826231, 0, 0.001553990528918803, 0, 0, 0, 0, 0, 0.004578427877277136, 0, 0, 0.001686752657406032, 0.001578124589286745, 0, 0, 0.001622974290512502, 0.005245636682957411, 0, 0, 0, 0.001593878027051687, -0.0131244994699955, 0.002551906509324908, 0, 0, -0.0131652969866991, 0.004250694066286087, -0.009107647463679314, 0, -0.009182669222354889, 0.002498466521501541, -0.0007170537719503045, 0.003877722192555666, -0.003410371253266931, 0.00354538531973958,
        0.004751998465508223, 0, 0.002610269235447049, 0, 0.0015196189051494, 0, 0, 0, 0.005056214518845081, 0, -0.008835854940116405, -0.01141801010817289, 0.003571471897885203, 0, -0.01584138721227646, -0.005679931491613388, 0.001569648389704525, 0, 0.001613475615158677, 0, 0, 0, 0, 0, 0.003518593963235617, 0, 0.002729137428104877, 0, 0, 0, 0, 0, 0.005292917136102915, 0, -0.0003432609664741904, -0.009162852540612221, 0.001552624395117164, 0, -0.009370109066367149, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.004081177990883589, 0, 0, 0, 0, 0, 0.001712478697299957, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        -0.0001207132590934634, 0.004465274047106504, -0.008598595857620239, 0.002369570080190897, 0, 0, 0, 0, 0.001529655768536031, 0, -0.005696930456906557, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.003959205001592636, 0.004797241650521755, -0.008468863554298878, 0.003481680760160089, 0, 0, 0, 0, 0, 0, -0.005641904193907976, 0.001514712232165039, 0, 0, 0, 0, -0.001233555260114372, 0.003726610913872719, -0.01110441237688065, 0.003760109189897776, 0.003303095465525985, 0.003743232926353812, 0.001716851140372455, 0.003447272116318345, 0.001597677823156118, 0, 0, 0, -0.003250003326684237, 0.002425220794975758, 0, 0,
        0, 0.001492768642492592, 0, 0.002415190916508436, 0, 0, 0, 0, 0, 0.003729024669155478, 0.002698980970308185, 0.003318552626296878, 0, 0, 0, 0, 0, 0, 0.001628860365599394, 0.00145136471837759, 0, 0.001542635378427804, 0, 0.00157142395619303, -0.005621602758765221, -0.0005564462044276297, 0, 0.004591463133692741, 0, 0, 0, 0, 0, 0, 0, 0.002528486307710409, 0, 0, 0, 0, -0.01104456000030041, 0.001457466278225183, -0.01345493365079165, 0.001505658030509949, 0, 0, -0.005596129689365625, 0.001511247712187469, -0.005596005357801914, 0, 0.002689692657440901, 0.004132781643420458, 0, 0, 0, 0, -0.008425132371485233, 0.003023817902430892, 0.0004841776681132615, 0.004926365334540606, 0, 0, -0.005555315874516964, 0,
        -0.003143457928672433, -0.002981132129207253, 0.004180249758064747, 0.001413419959135354, 0.001715951249934733, -0.01095201540738344, 0.001451392890885472, 0.001489921938627958, 0, -0.00856306217610836, 0, 0.001446535461582243, 0, -0.001514818635769188, 0, 0.0029737688601017, 0.004786678589880466, -0.01292825490236282, 0.004963067825883627, 0.002901030471548438, -0.005498677957803011, -0.001343240379355848, 0.004207320977002382, 0, 0, -0.006757824681699276, 0, 0.003738560015335679, 0, -0.0003027751517947763, 0, 0.002291887532919645, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.005562117323279381, 0, 0, 0, 0, 0, 0, 0.001628200523555279, 0, 0, 0, 0, -0.003201456507667899, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        -0.005530459806323051, 0.003164333058521152, 0, 0.00236542709171772, 0, 0, 0, 0, 0.00178952154237777, -0.01131695695221424, -0.005973456893116236, -0.00292279664427042, 0, 0.001441539847292006, 0, 0.002302534412592649, 0, 0, -0.003581657307222486, 0.004272609483450651, 0, 0.004152561537921429, 0, 0.0048816935159266, -0.008488217368721962, 0, -0.005213931668549776, -0.001595681300386786, 0, 0.003354955231770873, 0, 0.003996808081865311, 0, 0, 0, 0, 0, 0, 0, 0.001426658476702869, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.003178233047947288, 0, -0.005482478998601437, 0, 0, 0, 0.001503026345744729, 0, 0,
        -0.001441380125470459, 0.004223291296511889, 0, 0.004047178663313389, -0.00417760107666254, 0.004234023857861757, -0.003186510177329183, 0.003661580150946975, 0, 0.001491600996814668, 0, -0.005483012646436691, -0.003086039330810308, 0, 0, 0.00139852031134069, 0, 0.002449741121381521, 0, 0, -0.01515667326748371, 0.002854540245607495, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.003899478120729327, 0.001548699452541769, 0, -0.0003189043782185763, 0.003701426787301898, 0.001672705984674394, 0.002738562179729342, 0, 0.001418909057974815, 0, 0.001424676273018122, 0, 0.001558198477141559, -0.005488981027156115, 0, 0, 0, 0, 0, 0.001852395245805383, 0.00138977135065943, -0.01055358722805977, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, -0.005447813775390387, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.002228721510618925, 0, 0, 0, 0, 0, 0.001677107531577349, 0.002723475685343146, 0, 0.001537084113806486, 0, 0, 0.001480413950048387, 0, 0.001362728886306286, 0, 0.003674927400425076, 0, 0.003196449251845479, -0.005454347934573889, 0, -0.005106732714921236, 0, -0.006074273493140936, 0, -0.008465711958706379, 0, 0, 0.002229629084467888, 0, 0.001423340057954192, 0, 0.001319761737249792, 0, 0.002729682018980384, -0.001358307315967977, 0.00154651200864464, -0.009097782894968987, -0.00322474935092032, -0.0005334143061190844, 0.001411435077898204, -0.01051049120724201, 0, 0, 0.003352800384163857, -0.005282668862491846, 0.003544028848409653, 0, 0.004686921834945679, 0, 0.00341045344248414,
        0, 0.001617135014384985, 0.001679384266026318, -0.005093459039926529, 0, 0, 0, 0, 0.001400849316269159, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001846725004725158, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.004506799858063459, 0.0013612424954772, -0.0143651207908988, -0.01175682619214058, 0, 0, 0, 0, 0.004783974029123783, 0.002747132908552885, 0.000592846714425832, -0.01324266567826271, 0, 0, 0, 0, 0, 0, -0.005406955257058144, 0, 0.00322199915535748, 0, 0, 0.001884059165604413, 0, 0.00135376991238445, -0.005189194343984127, 0, 0.00378523301333189, 0, 0.002429578918963671, 0,
        0.003995611798018217, 0, 0.00364333763718605, -0.002804340096190572, 0, 0, 0, 0, 0.003230700735002756, -0.002974034985527396, 0, 0, 0, 0, 0, 0, 0.003627191996201873, -0.003558909520506859, 0.003816502634435892, -0.01494337897747755, 0, 0, 0, 0, 0.003253757953643799, -0.004317996092140675, 0, 0, 0, 0, 0, 0, 0.001367380260489881, 0, 0.00332819833420217, 0.001507333945482969, 0, 0, 0, 0, 0.002587185706943274, 0, 0, 0, 0, 0, 0, 0, 0.003104964504018426, 0.003808687208220363, 0.002684100065380335, -0.01059156842529774, 0, 0, 0, 0, 0.002906937152147293, 0.0005937512032687664, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0.001638223882764578, 0.00260894070379436, 0, 0.002532311948016286, -0.005310154519975185, 0.003300566226243973, 0, 0.003428873838856816, 0.00174367637373507, 0.003103039925917983, 0.003193652490153909, 0.002561431610956788, -0.00376598909497261, 0, 0, 0.001487461035139859, 0, 0, 0, 0, 0, 0, 0, 0, 0.001464630477130413, 0, 0, 0.002525429474189878, 0, 0.003042129334062338, -0.005286965984851122, 0.002872760873287916, -0.01220226101577282, 0, 0, 0.001357124885544181, 0.001845729886554182, 0.003422540379688144, 0.002657281933352351, 0.00348997232504189, -0.0133323771879077, 0.003545615822076797, 0.001613374566659331, 0, -0.005416579078882933, 0, 0, 0.002148620551452041, 0, 0.001299700583331287, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001841363729909062,
        0, -0.005247313529253006, 0.002740626456215978, -0.01097937487065792, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.003803875762969255, 0, 0.002995430724695325, -0.01073585543781519, 0.001273885136470199, 0, 0.002162711462005973, 0, 0.003141414374113083, -0.002666004467755556, 0.003216136945411563, -0.007454714737832546, 0, 0, 0, 0, 0.003548051696270704, 0.002443936187773943, 0.002064050873741508, 0.00173059874214232, 0.001287873368710279, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.004039376508444548, -0.000719947915058583, 0.002856644103303552, -0.002724447753280401, 0.002475501270964742, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0.001554358866997063, 0, 0.001154666417278349, 0, 0, 0, 0, 0, 0.001309438375756145, 0.001496094162575901, 0.003648426150903106, -0.005115071311593056, 0, 0, 0, 0, 0.002555225742980838, -0.01271465979516506, 0.003108062082901597, -0.003186133457347751, 0, -0.004849372897297144, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001184916822239757, -0.005389364901930094, 0, 0, 0, 0, 0, 0, 0.004328674171119928, -0.001146320719271898, 0, 0, 0, 0, 0, 0, 0.004284887108951807, 0.0001996157225221395, 0, 0, 0, -0.01288401614874601,
        0, 0, 0, 0, 0.001484873588196933, 0.001993460115045309, 0.001571222790516913, 0.003451762953773141, 0, 0, 0, 0, 0, 0.00123162567615509, 0, 0.001184973982162774, 0, 0, 0, 0, 0, 0, 0.001666284282691777, 0.001221626414917409, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.003906658384948969, 0.003179804421961308, 0.002014763187617064, 0.004175473470240831, 0, 0, 0, 0, 0, 0, 0, 0.001173866097815335, 0.002110069151967764, 0, 0, 0, -0.010565803386271, 0.001879393239505589, -0.007360712625086308, 0.003709348849952221, 0, 0, 0, 0, 0, 0, -0.007942177355289459, 0.001300769858062267,
        0, -0.0008923569112084806, 0, 0, 0, -0.002777390880510211, 0, 0, 0, 0.001218067482113838, 0, 0, 0, -0.0003474426048342139, 0, 0, 0, -0.01086665410548449, 0, 0, 0, 0, 0, 0, 0, -0.002215028973296285, 0, 0, 0, 0, 0, 0, 0.002228485886007547, -0.002784044714644551, 0.004067763686180115, -0.00552069116383791, 0, 0.002665845677256584, 0.003432545345276594, -0.005078021436929703, 0.00214909971691668, -0.00262005627155304, 0.003910503350198269, -0.001597474794834852, 0, 0.00178730022162199, 0.00343871396034956, -0.005136101040989161, 0, -0.004586241208016872, 0.002614380558952689, -0.005297607276588678, 0, 0, 0, 0, 0, 0, 0.002427996369078755, -0.00934960413724184, 0, 0, 0, 0,
        -0.005163898691534996, 0, -0.0001992042525671422, -0.005027367733418941, 0.002285047899931669, 0, 0.00417238287627697, 0, 0, 0, -0.01036902703344822, 0, 0, 0, 0.001255013630725443, -0.004692353773862123, 0, 0, 0.0004085823311470449, -0.009763318113982677, 0.001944475923664868, 0, 0.003477477468550205, 0, 0, 0, -0.00475085387006402, 0, 0, 0, -0.003913962747901678, 0, 0, 0, 0.004593062680214643, -0.005293742287904024, 0.001289863139390945, 0, 0.003650126280263066, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.01019193045794964, 0, 0, 0, 0.00228480389341712, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, -0.004693525843322277, 0, 0, 0, -0.004504682496190071, 0, -0.006992336362600327, 0, 0, 0, 0, 0, 0, 0, 0, 0.001893223379738629, -0.004657160956412554, 0.002229477744549513, 0, 0, -0.007175271864980459, 0.001289794687181711, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.002403544029220939, 0, -0.002256841864436865, 0, 0, 0, -0.004640729166567326, 0, -0.002035288140177727, 0, 0.001165834022685885, 0, -0.005664237309247255, 0, 0, 0.00399570120498538, 0.002397494856268167, 0.002753510372713208, -0.005040568299591541, 0.002017602790147066, -0.004667480010539293, 0.001861173426732421, -0.004589625634253025, 0.003846945706754923, -0.004963497165590525, 0.002814508276060224, 0.001662703580223024, 0, 0, 0.001189949456602335, 0,
        0, 0, 0, 0, -0.002374701201915741, 0, 0, 0, 0, 0, 0, 0, 0.003392222104594111, -0.004468675237149, 0, 0, 0, 0, 0, 0, -0.003046923317015171, 0, 0, 0, -2.843243601091672e-05, 0, 0, 0, 0.0009812371572479606, -0.01168526895344257, -0.01229306310415268, -0.004605923779308796, 0.001179673010483384, 0, 0, 0, 0.001878225360997021, 0, 0, 0, 0.001080975402146578, 0.001408959040418267, 0, 0, 0.003403076203539968, 0, 0, 0, 0, 0, 0, 0, 0.002737333765253425, 0, 0, 0, 0.003773801028728485, 0.001140869571827352, 0, 0, 0.003393992781639099, 0.002686632098630071, 0, 0,
        -0.005010871682316065, 0.001398392021656036, 0, 0, 0.001200576429255307, 0.002232394181191921, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.003129454329609871, 0, 0, 0.00248624524101615, 0.002909669652581215, 0, 0, -0.004926057532429695, 0.00288534234277904, 0, 0, 0.00183096737600863, 0.002715585520491004, 0, 0, -0.004530034493654966, 0.002468554303050041, -0.0044351601973176, -0.004383258055895567, 0.001311875996179879, 0.001938778208568692, -0.006732992362231016, -0.007914616726338863, 0, 0.001154619851149619, 0, 0, 0, 0.001156107638962567, 0, 0, 0, 0.002562153618782759, 0, -0.00775159802287817, 0, 0.002731088316068053, -0.004571379162371159, 0.002635818673297763, 0.001105239964090288, 0.002138869138434529, -0.005090042483061552, 0.001045088982209563, 0.001088470802642405, 0.002930507762357593, -0.002326228655874729, -0.001914938678964972,
        0, 0, 0, 0, 0.001480488572269678, 0.00180638546589762, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.002476449124515057, 0.001004932448267937, -0.004496059380471706, 0, -0.004995788913220167, 0.003081873757764697, -0.01253109704703093, 0.002781071467325091, -0.002586373127996922, 0.001801925827749074, 0, 0.001010988489724696, 0, 0.001701802248135209, -0.004206579178571701, 0.001952837919816375, 0.003219141392037272, 0, 0, 0, 0, 0.001973059726879001, -0.003417954314500093, 0, 0, 0, -0.004401896614581347, 0, 0, 0, 0.001460370724089444, 0.001145960413850844, 0.002811420243233442, 0, 0, 0.001080307061783969, 0, 0.002326594199985266, 0, 0.002057475270703435, 0, 0.002345788292586803, -0.007225144654512405, 0.001095407409593463, -0.009790430776774883, 0.003357462817803025, 0.002604188397526741, 0.003216007491573691, -0.0015823885332793,
        0.003235102631151676, 0.003725046990439296, 0.003074244596064091, -0.01256439834833145, 0.00120073149446398, 0, 0, 0, 0.002273257123306394, 0, 0.001123779336921871, -0.004368882160633802, 0.001051769708283246, 0, 0, 0, 0.002284779213368893, 0, 0.001076092361472547, 0.001937964814715087, 0, 0, 0, 0, 0.002053570933640003, -0.001970849931240082, 0.002573440317064524, -0.01090904325246811, 0, -0.004728418309241533, 0, -0.004947655368596315, 0.002837612992152572, 0.003002909943461418, 0, 0.002134764799848199, 0, 0.001525719999335706, 0.001287239021621644, 0, 0.001653670566156507, 0.001449417904950678, 0.001066764118149877, 0.002232708735391498, 0, -0.005013199988752604, 0.001136239152401686, 0, 0.001664847484789789, 0, 0.00103174161631614, -0.002410638146102428, 0, 0, 0.001144978683441877, 0, 0.002358024939894676, 0, 0.001741097308695316, -0.009958500973880291, 0, 0, 0, 0,
        0.002063983352854848, 0, 0.001043881289660931, 0, 0, 0, 0, 0, 0, -0.004975601099431515, 0.0009965305216610432, 0, 0.002691161120310426, 0.003611356718465686, 0.001626240089535713, 0.001438547391444445, 0.0009819938568398356, 0, 0, 0, 0, 0, 0, 0, 0.00234489212743938, 0, 0, 0, 0.003467555157840252, -0.000435468420619145, 0.001934086321853101, 0, 0.001066535245627165, -0.004721450619399548, 0.001894972985610366, -0.004577005747705698, 0, 0, 0, 0, 0.001115350984036922, 0.002215963322669268, 0, 0, 0.002719469601288438, -0.004986919928342104, 0.001002057222649455, -0.005366457160562277, 0, -0.01218506600707769, 0.00111203221604228, 0, 0, 0, 0, 0, 0.00252858130261302, -0.004500634036958218, 0, -0.004085976630449295, 0.002717663999646902, -0.003693731734529138, 0, 0.001899261027574539,
        0, 0, 0, 0, -0.004686039406806231, 0, 0.001130193006247282, 0, 0.002654955256730318, 0, -0.008906582370400429, -0.004289133939892054, 0.001984379254281521, -0.007805378176271915, -0.006392729468643665, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.003242088248953223, 0, -0.001609988743439317, 0, 0, 0, 0, 0, 0, -0.004309699404984713, 0, 0, -0.0005522320861928165, 0, 0.001429701806046069, 0, 0.003625502344220877, -0.007271996699273586, 0.001182633801363409, 0, 0, 0, 0, 0, -0.004848853219300508, 0, -0.00405533192679286, 0, 0, 0, 0, 0, 0.001859186450019479, 0, -0.004409948829561472, 0,
        0, 0.002831854624673724, -0.00425696512684226, -9.701661474537104e-05, 0, 0.002383711049333215, 0, 0, -0.00417792797088623, 0, -0.005886726547032595, 0, 0, 0, 0, 0, 0, 0.002159502590075135, 0, 0, 0.001403442583978176, 0, 0, 0, -0.0009251710143871605, 0, -0.007504228036850691, 0, 0, 0, 0, 0, -0.002528382930904627, 0.003218887839466333, 0.001796002150513232, 0.002722022123634815, 0, 0.001021169708110392, 0, 0, -0.00599939888343215, 0, -0.005072007887065411, 0, 0, 0, 0.001870134030468762, 0, 0, 0.002695857780054212, 0, 0.003021834185346961, 0, 0.001567820203490555, 0, 0.0009668259299360216, 0.003778096055611968, 0, -0.003644256852567196, 0, 0, 0, 0, 0,
        -0.004955660551786423, 0.001801519654691219, -0.001605344587005675, -0.00294945714995265, 0.003719782922416925, 0.002804458374157548, -0.004320592619478703, 0.001419707085005939, -0.004231734201312065, 0, -0.007965690456330776, 0, 0, 0.001288374071009457, -0.008162859827280045, 0.001174491946585476, 0, 0, 0, 0, 0.001591310719959438, 0.002140250522643328, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.002907698275521398, 0, 0, -0.004843542817980051, 0.002799042267724872, 0, 0, -0.004239336587488651, 0.001022265874780715, 0, 0, 0, 0.001566572114825249, 0, 0, -0.01071067899465561, 0.002775846514850855, 0, 0, 0.002363336505368352, 0.002974406583234668, 0, 0, 0.002110229339450598, 0, 0, 0, -0.007878689095377922, 0.001037243753671646, 0, 0,
        0, 0.002447765786200762, -0.001814728602766991, 0.0009700892842374742, 0.001342464820481837, 0.00263136182911694, -0.007694073021411896, 0.002170402556657791, 0, 0, -0.0045166308991611, 0.001629398320801556, 0, 0, 0.001365018193610013, 0.002814524108543992, 0, 0, 0, 0.001620043185539544, 0.002952434355393052, 0.0008811946026980877, 0.004612102638930082, 0.001029464416205883, 0, 0, -0.01015149615705013, 0.0004393068375065923, 0, 0, -0.009402059018611908, 0.002828606404364109, -0.004551601130515337, 0.001878739683888853, 0, 0, 0.004046171437948942, 0.002761028474196792, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.007606362923979759, 0.0009806316811591387, 0, 0, -0.002574590500444174, 0.002050594892352819, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, -0.004136861767619848, 0.001387844677083194, 0, 0, 0, 0, 0, 0, -0.00580174382776022, 0.003243729704990983, -0.006365292705595493, 0.001011304091662169, -0.004957307130098343, 0.002001591259613633, -0.001618714188225567, 0.001541324891149998, 0.002669305074959993, 0.002334122313186526, -0.0116857010871172, 0.002260616514831781, 0.003171586897224188, 0.002567754592746496, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.006957679055631161, 0.000990772619843483, 0, 0, 0, 0.001049789716489613, 0, 0,
        0, 0.001377435866743326, 0, 0, 0.002184732351452112, -0.004817723296582699, 0.001873363857157528, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0008534538792446256, 0, 0, 0, 0.002315204357728362, 0, 0.00247861840762198, 0, 0.0008090087794698775, 0, 0, 0, 7.530851144110784e-05, -0.004807945340871811, 0.002663506427779794, 0.002244251547381282, 0, 0, 0, 0, 0, -0.007953190244734287, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.004695942159742117, 0, 0, 0, -0.001819760189391673, 0, 0.0021201535128057, 0, 0, 0, 0, 0, -0.002544742543250322, -0.003924093209207058, 0, 0,
        0.001379436813294888, 0.002491343300789595, 0.001316943555139005, 0.001718995510600507, 0, 0.001901761046610773, 0, 0, 0.001626920187845826, 0.0008324919617734849, 0, 0.0009138835594058037, 0.00177560665179044, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0009315848001278937, 0, 0, 0, 0, -0.004296278115361929, 0, 0.003740611486136913, 0.002860923996195197, -0.006446498911827803, 0.002884456655010581, 0.002372938208281994, 0.001866580336354673, 0, 0, -0.005268760956823826, 0.001679314882494509, -0.007505400106310844, 0.001153075834736228, -0.00798893254250288, 0.000872717471793294, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0006303858826868236, 0.002317331964150071, -0.009190937504172325, 0.0006912460667081177, -0.002200535498559475, 0.001546556362882257, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001361920614726841, 0, 0, 0.00152317073661834, 0, 0, 0, 0.001965923234820366, 0, 0.001353509142063558, 0.001307066297158599, 0, 0.00161471834871918, 0.001357031404040754, 0, 0.0009914763504639268, -0.002389918314293027, 0.002112467074766755, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.004013411700725555, 0, 0.001862898585386574, 0.00136909110005945, 0.001397099695168436, -0.002385545521974564, 0.002243452938273549, -0.0001134499325416982, 0.002635291079059243, 0, 0.001832587062381208, 0, 0.0009110685787163675, -0.0012794901849702, 0.002838014625012875, -0.00790068693459034, 0.002543914131820202,
        -0.002912633353844285, 0.003371144877746701, 0, 0.001297263312153518, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.001945945085026324, 0.003887059865519404, 0, 0, -0.003790138754993677, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.0002584578760433942, 0.003076864406466484, 0, 0.002827249234542251, 0.0009744492126628757, 0.002600473817437887, 0, 0, -0.003983310889452696, 0, 0, 0, 0, 0, 0, 0, -0.007388937752693892, 0.00346886832267046, 0, -0.002666944172233343, -0.003928847145289183, -0.008637177757918835, -0.003597180359065533, 0, 0, -0.008969051763415337, 0, -0.00425040116533637, -0.003971992060542107, 0, 0, 0,
        0, 0, 0, 0, -0.003953435923904181, 0, 0, 0, 0, 0, -0.004593280609697104, 0, 0, 0, 0, 0, -0.007039908785372972, 0, 0, 0, -0.00376171269454062, 0.002447254490107298, 0, 0, 0.001717888633720577, 0, -0.001697926549240947, 0, 0.001618544571101665, 0.001237052376382053, -0.003857750445604324, 0.002844595583155751, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.004254704341292381, 0.001143395318649709, 0, 0, -0.0003733706253115088, 0, -0.0002426557039143518, 0, -0.004249692428857088, 0.002463888376951218, -0.003631924046203494, 0.002933393232524395,
        0, 0.002833857201039791, 0, -0.004108599852770567, 0, 0, 0, 0, 0, 0.001287802937440574, 0, 0, -0.00450481753796339, 0.000854352954775095, 0, 0, -0.00406533433124423, 0.003056294750422239, 0, -0.004255712032318115, 0, 0, 0, 0, 0.001347878249362111, 0.001416816608980298, -0.003940382041037083, -0.007226851768791676, -0.003867507912218571, 0.003584126709029078, 0, 0, 0, -0.003407602198421955, -0.00392378494143486, 0, 0, 0, 0, 0, 0, -0.00203811633400619, 0, 0, 0, -0.003496939549222589, 0, 0, -0.00373349990695715, 0, 0, 0, 0, 0, 0, 0, 0, -0.005422618240118027, 0, 0, 0, 0, 0, 0,
        0, 0, 0.001659075845964253, -0.003894356777891517, 0, 0, 0, 0, 0, 0, 0.003039743984118104, 0, 0, 0, 0, 0, 0, 0, 0.001239074859768152, 0, 0, 0, 0, 0, 0, 0, 0.002933135023340583, 0, 0, 0, 0, 0, 0.001839578268118203, 0, -0.001834367169067264, 0, 0, 0, 0, 0, 0, 0, -0.0005973126972094178, -0.007210853975266218, 0, 0, 0, 0, 0, 0, -0.01014575269073248, -0.006436974741518497, 0, 0, 0, 0, 0, 0, -0.001225046813488007, -0.004077785182744265, 0, 0, 0, 0,
        0.0020663405302912, 0, 0, 0, 0, 0, -0.003906494937837124, -0.007218523416668177, 0.0008702659397386014, 0, 0, 0, 0, 0, -0.00711128581315279, -0.003862551646307111, 0.002633522963151336, 0.001664179028011858, -0.0003420013235881925, -0.005607413593679667, 0.00244629685766995, 0.001127307885326445, -0.004168989136815071, -0.005536461248993874, 0.002261748304590583, 0.001354421372525394, 0.003976759500801563, -0.004538849461823702, 0.001525243860669434, 0.0008763371151871979, -0.00185148639138788, -0.00185276591219008, 0, 0, -0.004688316956162453, 0, 0, 0, -0.004738642834126949, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0008144500898197293, 0, 0, 0, 0.002051630523055792, 0, 0.001586138154380023, 0, 0.001797939883545041, 0, 0.001270564622245729, 0, 0.001500142738223076, 0, 0.001859048847109079, 0,
        0, -0.007025949656963348, 0, -0.001704026362858713, 0, -0.003833582391962409, 0, -0.005322064273059368, 0, 0, 0.001095699844881892, 0, 0, -0.008076147176325321, 0, 0, 0, -0.001767888315953314, 0, 0.004148969426751137, 0, -0.007322253193706274, 0, -0.00423748604953289, 0.001915299450047314, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.002319193677976727, 0, 0.001929675228893757, 0, 0.00210640300065279, 0, 0.001164429821074009, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.002437310060486197, 0, 0.001999399624764919, 0, 0.002572906436398625, 0, 0.002349039539694786, 0,
        0, 0, -0.001890337443910539, 0, 0, 0, 0, 0, 0, 0, -0.004268493968993425, 0, 0, 0, 0, 0, 0.00175205827690661, 0, 0.0026504285633564, 0.002082147635519505, 0.001825931598432362, 0, -0.006881100591272116, -0.009636447764933109, 0.002105278661474586, 0.0007678515976294875, 0.002226126147434115, 0.001376357628032565, 0.001726003712974489, 0, 0.0002206308854511008, -0.008537928573787212, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001292816246859729, 0, 0, 0, 0, 0, 0.001087481970898807, 0, 0.002209854312241077, 0, 0.001224806997925043, 0, 0.002469559898599982, 0, 0, 0, 0.001664257259108126, 0, 0, 0, 0, 0.002248387085273862,
        -0.001157263177447021, 0, 0.001110440818592906, 0, 0.001966915791854262, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0003352579951751977, -0.006862134672701359, 0, 0, 0.0019750299397856, 0, 0, 0, -0.002744915662333369, -0.003761101979762316, -0.007599906530231237, 0, 0.001068666693754494, 0, 0.001083940151147544, 0, 0.003798522055149078, -0.004060622304677963, 0.0008579774294048548, 0, 0.002384442603215575, 0, 0.001315267640165985, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.000548160111065954, -0.004061621148139238, -0.00585060054436326, -0.003740796120837331, 0.002459849929437041, 0, 0.0008418246870860457, 0, 0, 0, -0.005351429805159569, 0, 0, 0, 0, 0
    ]
    model_ctrs = catboost_model_ctrs_container(
        used_model_ctrs_count = 27,
        compressed_model_ctrs = [
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [3],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471478, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471478, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471478, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130472, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [4],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471473, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471473, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471473, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130479, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [5],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471472, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471472, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471472, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130478, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [6],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471475, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471475, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471475, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130477, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [7],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471474, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471474, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471474, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130476, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [8],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471469, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471469, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471469, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 11154939068695130483, base_ctr_type = "FeatureFreq", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1)
                ]
            ),
            catboost_compressed_model_ctr(
                projection = catboost_projection(
                    transposed_cat_feature_indexes = [10],
                    binarized_indexes = []
                ),
                model_ctrs = [
                    catboost_model_ctr(base_hash = 768791580653471471, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471471, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 0.5, prior_denom = 1, shift = 0, scale = 1),
                    catboost_model_ctr(base_hash = 768791580653471471, base_ctr_type = "Borders", target_border_idx = 0, prior_num = 1, prior_denom = 1, shift = 0, scale = 1)
                ]
            )
        ],
        ctr_data = catboost_ctr_data(
            learn_ctrs = {
                768791580653471469 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 18446744073709551615 : 0, 8473802870189803490 : 0, 7071392469244395075 : 2, 18446744073709551615 : 0, 8806438445905145973 : 3, 619730330622847022 : 1, 18446744073709551615 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 2.94273e-44, count = 61), catboost_ctr_mean_history(sum = 0, count = 12), catboost_ctr_mean_history(sum = 1.4013e-45, count = 5), catboost_ctr_mean_history(sum = 0, count = 1)],
                    ctr_total = [21, 61, 0, 12, 1, 5, 0, 1]
                ),
                768791580653471471 :
                catboost_ctr_value_table(
                    index_hash_viewer = {2136296385601851904 : 0, 7428730412605434673 : 2, 9959754109938180626 : 6, 14256903225472974739 : 1, 8056048104805248435 : 3, 18446744073709551615 : 0, 12130603730978457510 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 10789443546307262781 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 2.8026e-44, count = 73), catboost_ctr_mean_history(sum = 0, count = 1), catboost_ctr_mean_history(sum = 0, count = 2), catboost_ctr_mean_history(sum = 0, count = 2), catboost_ctr_mean_history(sum = 0, count = 1), catboost_ctr_mean_history(sum = 1.4013e-45, count = 0), catboost_ctr_mean_history(sum = 1.4013e-45, count = 0)],
                    ctr_total = [20, 73, 0, 1, 0, 2, 0, 2, 0, 1, 1, 0, 1, 0]
                ),
                768791580653471472 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 18446744073709551615 : 0, 13987540656699198946 : 3, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18089724839685297862 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 10353740403438739754 : 1, 3922001124998993866 : 2, 13686716744772876732 : 4, 18293943161539901837 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 0, count = 13), catboost_ctr_mean_history(sum = 3.08286e-44, count = 20), catboost_ctr_mean_history(sum = 0, count = 37), catboost_ctr_mean_history(sum = 0, count = 2), catboost_ctr_mean_history(sum = 0, count = 4), catboost_ctr_mean_history(sum = 0, count = 3)],
                    ctr_total = [0, 13, 22, 20, 0, 37, 0, 2, 0, 4, 0, 3]
                ),
                768791580653471473 :
                catboost_ctr_value_table(
                    index_hash_viewer = {7537614347373541888 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 5903587924673389870 : 2, 18278593470046426063 : 6, 10490918088663114479 : 3, 18446744073709551615 : 0, 407784798908322194 : 7, 5726141494028968211 : 1, 1663272627194921140 : 10, 8118089682304925684 : 8, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 15431483020081801594 : 9, 18446744073709551615 : 0, 18446744073709551615 : 0, 1403990565605003389 : 5, 3699047549849816830 : 11, 14914630290137473119 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 9.80909e-45, count = 3), catboost_ctr_mean_history(sum = 1.4013e-45, count = 3), catboost_ctr_mean_history(sum = 5.60519e-45, count = 24), catboost_ctr_mean_history(sum = 0, count = 3), catboost_ctr_mean_history(sum = 5.60519e-45, count = 16), catboost_ctr_mean_history(sum = 4.2039e-45, count = 16), catboost_ctr_mean_history(sum = 0, count = 4), catboost_ctr_mean_history(sum = 0, count = 5), catboost_ctr_mean_history(sum = 1.4013e-45, count = 1), catboost_ctr_mean_history(sum = 0, count = 1), catboost_ctr_mean_history(sum = 0, count = 3), catboost_ctr_mean_history(sum = 2.8026e-45, count = 0)],
                    ctr_total = [7, 3, 1, 3, 4, 24, 0, 3, 4, 16, 3, 16, 0, 4, 0, 5, 1, 1, 0, 1, 0, 3, 2, 0]
                ),
                768791580653471474 :
                catboost_ctr_value_table(
                    index_hash_viewer = {3607388709394294015 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18356215166324018775 : 2, 18365206492781874408 : 1, 18446744073709551615 : 0, 18446744073709551615 : 0, 14559146096844143499 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 11416626865500250542 : 3, 5549384008678792175 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 0, count = 22), catboost_ctr_mean_history(sum = 2.8026e-45, count = 3), catboost_ctr_mean_history(sum = 0, count = 14), catboost_ctr_mean_history(sum = 2.66247e-44, count = 17), catboost_ctr_mean_history(sum = 0, count = 22), catboost_ctr_mean_history(sum = 1.4013e-45, count = 1)],
                    ctr_total = [0, 22, 2, 3, 0, 14, 19, 17, 0, 22, 1, 1]
                ),
                768791580653471475 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 14452488454682494753 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 1388452262538353895 : 9, 8940247467966214344 : 1, 4415016594903340137 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 41084306841859596 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 8678739366408346384 : 2, 18446744073709551615 : 0, 4544226147037566482 : 11, 14256903225472974739 : 8, 16748601451484174196 : 7, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 5913522704362245435 : 6, 1466902651052050075 : 10, 2942073219785550491 : 12, 15383677753867481021 : 3, 18446744073709551615 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 8.40779e-45, count = 10), catboost_ctr_mean_history(sum = 2.8026e-45, count = 8), catboost_ctr_mean_history(sum = 0, count = 6), catboost_ctr_mean_history(sum = 2.8026e-45, count = 14), catboost_ctr_mean_history(sum = 1.4013e-45, count = 4), catboost_ctr_mean_history(sum = 2.8026e-45, count = 9), catboost_ctr_mean_history(sum = 0, count = 11), catboost_ctr_mean_history(sum = 0, count = 3), catboost_ctr_mean_history(sum = 1.4013e-45, count = 5), catboost_ctr_mean_history(sum = 9.80909e-45, count = 6), catboost_ctr_mean_history(sum = 0, count = 2), catboost_ctr_mean_history(sum = 1.4013e-45, count = 0), catboost_ctr_mean_history(sum = 0, count = 1)],
                    ctr_total = [6, 10, 2, 8, 0, 6, 2, 14, 1, 4, 2, 9, 0, 11, 0, 3, 1, 5, 7, 6, 0, 2, 1, 0, 0, 1]
                ),
                768791580653471478 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 15379737126276794113 : 5, 18446744073709551615 : 0, 14256903225472974739 : 3, 18048946643763804916 : 1, 2051959227349154549 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 7024059537692152076 : 6, 18446744073709551615 : 0, 15472181234288693070 : 2, 8864790892067322495 : 0},
                    target_classes_count = 2,
                    counter_denominator = 0,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 1.4013e-44, count = 58), catboost_ctr_mean_history(sum = 0, count = 4), catboost_ctr_mean_history(sum = 1.4013e-45, count = 6), catboost_ctr_mean_history(sum = 1.4013e-45, count = 5), catboost_ctr_mean_history(sum = 4.2039e-45, count = 6), catboost_ctr_mean_history(sum = 2.8026e-45, count = 0), catboost_ctr_mean_history(sum = 7.00649e-45, count = 0)],
                    ctr_total = [10, 58, 0, 4, 1, 6, 1, 5, 3, 6, 2, 0, 5, 0]
                ),
                11154939068695130472 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 15379737126276794113 : 5, 18446744073709551615 : 0, 14256903225472974739 : 3, 18048946643763804916 : 1, 2051959227349154549 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 7024059537692152076 : 6, 18446744073709551615 : 0, 15472181234288693070 : 2, 8864790892067322495 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 9.52883e-44, count = 4), catboost_ctr_mean_history(sum = 9.80909e-45, count = 6), catboost_ctr_mean_history(sum = 1.26117e-44, count = 2)],
                    ctr_total = [68, 4, 7, 6, 9, 2, 5]
                ),
                11154939068695130476 :
                catboost_ctr_value_table(
                    index_hash_viewer = {3607388709394294015 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18356215166324018775 : 2, 18365206492781874408 : 1, 18446744073709551615 : 0, 18446744073709551615 : 0, 14559146096844143499 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 11416626865500250542 : 3, 5549384008678792175 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 3.08286e-44, count = 5), catboost_ctr_mean_history(sum = 1.96182e-44, count = 36), catboost_ctr_mean_history(sum = 3.08286e-44, count = 2)],
                    ctr_total = [22, 5, 14, 36, 22, 2]
                ),
                11154939068695130477 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 14452488454682494753 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 1388452262538353895 : 9, 8940247467966214344 : 1, 4415016594903340137 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 41084306841859596 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 8678739366408346384 : 2, 18446744073709551615 : 0, 4544226147037566482 : 11, 14256903225472974739 : 8, 16748601451484174196 : 7, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 5913522704362245435 : 6, 1466902651052050075 : 10, 2942073219785550491 : 12, 15383677753867481021 : 3, 18446744073709551615 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 2.24208e-44, count = 10), catboost_ctr_mean_history(sum = 8.40779e-45, count = 16), catboost_ctr_mean_history(sum = 7.00649e-45, count = 11), catboost_ctr_mean_history(sum = 1.54143e-44, count = 3), catboost_ctr_mean_history(sum = 8.40779e-45, count = 13), catboost_ctr_mean_history(sum = 2.8026e-45, count = 1)],
                    ctr_total = [16, 10, 6, 16, 5, 11, 11, 3, 6, 13, 2, 1, 1]
                ),
                11154939068695130478 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 18446744073709551615 : 0, 13987540656699198946 : 3, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18089724839685297862 : 5, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 10353740403438739754 : 1, 3922001124998993866 : 2, 13686716744772876732 : 4, 18293943161539901837 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 1.82169e-44, count = 42), catboost_ctr_mean_history(sum = 5.1848e-44, count = 2), catboost_ctr_mean_history(sum = 5.60519e-45, count = 3)],
                    ctr_total = [13, 42, 37, 2, 4, 3]
                ),
                11154939068695130479 :
                catboost_ctr_value_table(
                    index_hash_viewer = {7537614347373541888 : 4, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 5903587924673389870 : 2, 18278593470046426063 : 6, 10490918088663114479 : 3, 18446744073709551615 : 0, 407784798908322194 : 7, 5726141494028968211 : 1, 1663272627194921140 : 10, 8118089682304925684 : 8, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 18446744073709551615 : 0, 15431483020081801594 : 9, 18446744073709551615 : 0, 18446744073709551615 : 0, 1403990565605003389 : 5, 3699047549849816830 : 11, 14914630290137473119 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 1.4013e-44, count = 4), catboost_ctr_mean_history(sum = 3.92364e-44, count = 3), catboost_ctr_mean_history(sum = 2.8026e-44, count = 19), catboost_ctr_mean_history(sum = 5.60519e-45, count = 5), catboost_ctr_mean_history(sum = 2.8026e-45, count = 1), catboost_ctr_mean_history(sum = 4.2039e-45, count = 2)],
                    ctr_total = [10, 4, 28, 3, 20, 19, 4, 5, 2, 1, 3, 2]
                ),
                11154939068695130483 :
                catboost_ctr_value_table(
                    index_hash_viewer = {18446744073709551615 : 0, 18446744073709551615 : 0, 8473802870189803490 : 0, 7071392469244395075 : 2, 18446744073709551615 : 0, 8806438445905145973 : 3, 619730330622847022 : 1, 18446744073709551615 : 0},
                    target_classes_count = 0,
                    counter_denominator = 101,
                    ctr_mean_history = [catboost_ctr_mean_history(sum = 1.14906e-43, count = 12), catboost_ctr_mean_history(sum = 8.40779e-45, count = 1)],
                    ctr_total = [82, 12, 6, 1]
                )
            }
        )
    )


### Routines to compute CTRs

def calc_hash(a, b):
    max_int = 0xffFFffFFffFFffFF
    MAGIC_MULT = 0x4906ba494954cb65
    return (MAGIC_MULT * ((a + MAGIC_MULT * b) & max_int)) & max_int


def calc_hashes(binarized_features, hashed_cat_features, transposed_cat_feature_indexes, binarized_feature_indexes):
    result = 0
    for cat_feature_index in transposed_cat_feature_indexes:
        result = calc_hash(result, hashed_cat_features[cat_feature_index])
    for bin_feature_index in binarized_feature_indexes:
        binary_feature = binarized_features[bin_feature_index.bin_index]
        if not(bin_feature_index.check_value_equal):
            result = calc_hash(result, 1 if (binary_feature >= bin_feature_index.value) else 0)
        else:
            result = calc_hash(result, 1 if (binary_feature == bin_feature_index.value) else 0)
    return result


def calc_ctrs(model_ctrs, binarized_features, hashed_cat_features, result):
    ctr_hash = 0
    result_index = 0

    for i in range(len(model_ctrs.compressed_model_ctrs)):
        proj = model_ctrs.compressed_model_ctrs[i].projection
        ctr_hash = calc_hashes(binarized_features, hashed_cat_features, proj.transposed_cat_feature_indexes, proj.binarized_indexes)
        for j in range(len(model_ctrs.compressed_model_ctrs[i].model_ctrs)):
            ctr = model_ctrs.compressed_model_ctrs[i].model_ctrs[j]
            learn_ctr = model_ctrs.ctr_data.learn_ctrs[ctr.base_hash]
            ctr_type = ctr.base_ctr_type
            bucket = learn_ctr.resolve_hash_index(ctr_hash)
            if bucket is None:
                result[result_index] = ctr.calc(0, 0)
            else:
                if ctr_type == "BinarizedTargetMeanValue" or ctr_type == "FloatTargetMeanValue":
                    ctr_mean_history = learn_ctr.ctr_mean_history[bucket]
                    result[result_index] = ctr.calc(ctr_mean_history.sum, ctr_mean_history.count)
                elif ctr_type == "Counter" or ctr_type == "FeatureFreq":
                    ctr_total = learn_ctr.ctr_total
                    denominator = learn_ctr.counter_denominator
                    result[result_index] = ctr.calc(ctr_total[bucket], denominator)
                elif ctr_type == "Buckets":
                    ctr_history = learn_ctr.ctr_total
                    target_classes_count = learn_ctr.target_classes_count
                    total_count = 0
                    good_count = ctr_history[bucket * target_classes_count + ctr.target_border_idx];
                    for class_id in range(target_classes_count):
                        total_count += ctr_history[bucket * target_classes_count + class_id]
                    result[result_index] = ctr.calc(good_count, total_count)
                else:
                    ctr_history = learn_ctr.ctr_total;
                    target_classes_count = learn_ctr.target_classes_count;

                    if target_classes_count > 2:
                        good_count = 0
                        total_count = 0
                        for class_id in range(ctr.target_border_idx + 1):
                            total_count += ctr_history[bucket * target_classes_count + class_id]
                        for class_id in range(ctr.target_border_idx + 1, target_classes_count):
                            good_count += ctr_history[bucket * target_classes_count + class_id]
                        total_count += good_count;
                        result[result_index] = ctr.calc(good_count, total_count);
                    else:
                        result[result_index] = ctr.calc(ctr_history[bucket * 2 + 1], ctr_history[bucket * 2] + ctr_history[bucket * 2 + 1])
            result_index += 1



cat_features_hashes = {
    "Female": -2114564283,
    "Protective-serv": -2075156126,
    "Assoc-voc": -2029370604,
    "Married-civ-spouse": -2019910086,
    "Federal-gov": -1993066135,
    "Transport-moving": -1903253868,
    "Farming-fishing": -1888947309,
    "Prof-school": -1742589394,
    "Self-emp-inc": -1732053524,
    "?": -1576664757,
    "Handlers-cleaners": -1555793520,
    "0": -1438285038,
    "Philippines": -1437257447,
    "Male": -1291328762,
    "11th": -1209300766,
    "Unmarried": -1158645841,
    "Local-gov": -1105932163,
    "Divorced": -993514283,
    "Some-college": -870577664,
    "Asian-Pac-Islander": -787966085,
    "Sales": -760428919,
    "Self-emp-not-inc": -661998850,
    "Widowed": -651660490,
    "Masters": -453513993,
    "State-gov": -447941100,
    "Doctorate": -434936054,
    "White": -218697806,
    "Own-child": -189887997,
    "Amer-Indian-Eskimo": -86031875,
    "Exec-managerial": -26537793,
    "Husband": 60472414,
    "Italy": 117615621,
    "Not-in-family": 143014663,
    "n": 239748506,
    "Married-spouse-absent": 261588508,
    "Prof-specialty": 369959660,
    "Assoc-acdm": 475479755,
    "Adm-clerical": 495735304,
    "Bachelors": 556725573,
    "HS-grad": 580496350,
    "Craft-repair": 709691013,
    "Other-relative": 739168919,
    "Other-service": 786213683,
    "9th": 840896980,
    "Separated": 887350706,
    "10th": 888723975,
    "Mexico": 972041323,
    "Hong": 995245846,
    "1": 1121341681,
    "Tech-support": 1150039955,
    "Black": 1161225950,
    "Canada": 1510821218,
    "Wife": 1708186408,
    "United-States": 1736516096,
    "Never-married": 1959200218,
    "Machine-op-inspct": 2039859473,
    "7th-8th": 2066982375,
    "Private": 2084267031,
}

def hash_uint64(string):
    return cat_features_hashes.get(str(string), 0x7fFFffFF)


### Applicator for the CatBoost model

def apply_catboost_model(float_features, cat_features=[], ntree_start=0, ntree_end=catboost_model.tree_count):
    """
    Applies the model built by CatBoost.

    Parameters
    ----------

    float_features : list of float features

    cat_features : list of categorical features
        You need to pass float and categorical features separately in the same order they appeared in train dataset.
        For example if you had features f1,f2,f3,f4, where f2 and f4 were considered categorical, you need to pass here float_features=f1,f3, cat_features=f2,f4


    Returns
    -------
    prediction : formula value for the model and the features

    """
    if ntree_end == 0:
        ntree_end = catboost_model.tree_count
    else:
        ntree_end = min(ntree_end, catboost_model.tree_count)

    model = catboost_model

    assert len(float_features) >= model.float_feature_count
    assert len(cat_features) >= model.cat_feature_count

    # Binarise features
    binary_features = [0] * model.binary_feature_count
    binary_feature_index = 0

    for i in range(len(model.float_feature_borders)):
        for border in model.float_feature_borders[i]:
            binary_features[binary_feature_index] += 1 if (float_features[model.float_features_index[i]] > border) else 0
        binary_feature_index += 1
    transposed_hash = [0] * model.cat_feature_count
    for i in range(model.cat_feature_count):
        transposed_hash[i] = hash_uint64(cat_features[i])

    if len(model.one_hot_cat_feature_index) > 0:
        cat_feature_packed_indexes = {}
        for i in range(model.cat_feature_count):
            cat_feature_packed_indexes[model.cat_features_index[i]] = i
        for i in range(len(model.one_hot_cat_feature_index)):
            cat_idx = cat_feature_packed_indexes[model.one_hot_cat_feature_index[i]]
            hash = transposed_hash[cat_idx]
            for border_idx in range(len(model.one_hot_hash_values[i])):
                binary_features[binary_feature_index] |= (1 if hash == model.one_hot_hash_values[i][border_idx] else 0) * (border_idx + 1)
            binary_feature_index += 1

    if hasattr(model, 'model_ctrs') and model.model_ctrs.used_model_ctrs_count > 0:
        ctrs = [0.] * model.model_ctrs.used_model_ctrs_count;
        calc_ctrs(model.model_ctrs, binary_features, transposed_hash, ctrs)
        for i in range(len(model.ctr_feature_borders)):
            for border in model.ctr_feature_borders[i]:
                binary_features[binary_feature_index] += 1 if ctrs[i] > border else 0
            binary_feature_index += 1

    # Extract and sum values from trees
    result = 0.
    tree_splits_index = 0
    current_tree_leaf_values_index = 0
    for tree_id in range(ntree_start, ntree_end):
        current_tree_depth = model.tree_depth[tree_id]
        index = 0
        for depth in range(current_tree_depth):
            border_val = model.tree_split_border[tree_splits_index + depth]
            feature_index = model.tree_split_feature_index[tree_splits_index + depth]
            xor_mask = model.tree_split_xor_mask[tree_splits_index + depth]
            index |= ((binary_features[feature_index] ^ xor_mask) >= border_val) << depth
        result += model.leaf_values[current_tree_leaf_values_index + index]
        tree_splits_index += current_tree_depth
        current_tree_leaf_values_index += (1 << current_tree_depth)
    return result



