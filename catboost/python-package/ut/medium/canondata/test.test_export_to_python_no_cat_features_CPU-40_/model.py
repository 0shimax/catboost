###  Model data
class catboost_model(object):
    float_features_index = [
        0, 1, 2, 3, 4, 5, 6, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 26, 28, 31, 32, 33, 34, 35, 36, 37, 38, 39, 46, 47, 48, 49,
    ]
    float_feature_count = 50
    cat_feature_count = 0
    binary_feature_count = 38
    tree_count = 40
    float_feature_borders = [
        [0.1160815, 0.18475249, 0.38285398, 0.41922951, 0.43419302, 0.51841998, 0.58774298, 0.72966146],
        [0.000297619, 0.009388525, 0.0137446, 0.01517855, 0.02086035, 0.14096999, 0.153148],
        [0.0045381449, 0.019646101, 0.059168197, 0.62430799, 0.640688, 0.90201151, 0.93767154],
        [0.5],
        [0.5],
        [0.5],
        [0.5],
        [0.5],
        [0.5],
        [0.5],
        [0.5],
        [0.5],
        [0.3784315, 0.44117647, 0.44901949, 0.49215698, 0.547059, 0.56666648, 0.61372554, 0.67843151, 0.77451003, 0.80196053, 0.82352948, 0.86078453],
        [0.6799795],
        [0.037977397, 0.051106799, 0.098120645, 0.1100305, 0.35292852],
        [0.34247202, 0.35590351, 0.40465051],
        [0.5],
        [0.5],
        [0.33529401, 0.4137255, 0.48431399, 0.48823547, 0.53921551, 0.60980403, 0.61764699, 0.6686275, 0.81176448],
        [0.5],
        [0.5],
        [0.097222149, 0.16666651, 0.41666651],
        [0.022544799, 0.17920801, 0.183991, 0.23842499, 0.2457, 0.93784499, 0.96097201],
        [0.5],
        [0.5],
        [0.033793852, 0.052111451, 0.069747344, 0.095004097, 0.1110935, 0.12662101, 0.28314501, 0.3006655, 0.38460952, 0.79564852, 0.89159751],
        [0.5],
        [0.034996502, 0.056723498, 0.080127999, 0.1403345, 0.198566, 0.4518925, 0.58578402, 0.60982096],
        [0.5],
        [0.1199725, 0.19777599, 0.78175402],
        [0.5],
        [0.00058962253, 0.00176887, 0.0036219701, 0.0038746651, 0.0096024247, 0.01052895, 0.0140667, 0.024511449, 0.03217655],
        [0.65174997, 0.66582948, 0.92046201, 0.97901797],
        [0.000123647, 0.00028358999, 0.00038780703, 0.00071648997, 0.00097681896, 0.001532185, 0.0029521398, 0.00638127, 0.0069304151, 0.0074996753, 0.01464975, 0.0170666, 0.01752845],
        [0.09804865, 0.2251415, 0.28595048, 0.2977975, 0.323827, 0.37451699, 0.762613],
        [0.4393695, 0.566181, 0.61604452, 0.62173098, 0.73340154, 0.84359753, 0.92535001, 0.96478701, 0.974935, 0.98062503, 0.98128402, 0.98459351],
        [0.1105005, 0.2032025, 0.252812, 0.2598795, 0.3445805, 0.62303448, 0.94968104],
        [0.5]
    ]
    tree_depth = [6, 4, 6, 6, 5, 6, 5, 6, 6, 6, 6, 6, 6, 5, 6, 6, 6, 6, 5, 6, 1, 6, 6, 6, 5, 6, 6, 6, 5, 6, 6, 6, 2, 4, 6, 6, 6, 6, 6, 6]
    tree_split_border = [1, 1, 2, 1, 1, 4, 1, 1, 1, 1, 1, 3, 1, 2, 1, 9, 1, 10, 8, 1, 6, 3, 1, 8, 7, 2, 1, 7, 3, 1, 5, 1, 1, 1, 1, 1, 9, 1, 4, 4, 1, 1, 1, 1, 4, 1, 5, 1, 7, 9, 3, 10, 3, 6, 7, 3, 1, 1, 1, 1, 1, 1, 5, 6, 1, 1, 1, 1, 1, 1, 6, 8, 4, 4, 6, 9, 6, 1, 1, 7, 1, 3, 5, 1, 8, 11, 2, 9, 1, 1, 11, 4, 4, 1, 5, 3, 2, 1, 5, 3, 2, 4, 2, 3, 1, 4, 2, 1, 7, 5, 1, 5, 11, 1, 1, 2, 1, 1, 3, 1, 1, 2, 1, 8, 1, 4, 1, 1, 8, 6, 7, 2, 7, 1, 1, 7, 1, 1, 2, 7, 4, 1, 1, 1, 4, 1, 3, 4, 1, 1, 12, 6, 1, 11, 1, 1, 2, 1, 3, 2, 1, 6, 5, 2, 2, 3, 2, 3, 1, 1, 1, 1, 1, 6, 5, 3, 1, 3, 12, 10, 10, 3, 5, 1, 1, 1, 8, 7, 1, 3, 8, 1, 4, 1, 1, 5, 1, 6, 5, 7, 8, 1, 1, 6, 9, 7, 12, 2, 1, 2, 1, 1, 6, 4, 4, 13, 3, 1, 2, 1, 5]
    tree_split_feature_index = [26, 17, 14, 19, 11, 36, 26, 3, 9, 17, 1, 25, 16, 33, 35, 31, 9, 33, 25, 30, 35, 0, 26, 18, 27, 36, 20, 0, 18, 37, 31, 30, 6, 31, 26, 10, 33, 23, 31, 1, 4, 28, 26, 10, 27, 9, 0, 2, 22, 35, 34, 12, 32, 18, 2, 36, 5, 26, 17, 37, 8, 32, 2, 27, 26, 23, 24, 7, 26, 8, 12, 0, 32, 12, 33, 18, 36, 23, 3, 31, 23, 34, 35, 11, 12, 33, 32, 25, 13, 10, 35, 35, 0, 10, 14, 21, 34, 11, 18, 22, 35, 36, 27, 31, 14, 34, 22, 28, 12, 27, 8, 36, 12, 33, 20, 25, 10, 30, 15, 29, 8, 35, 28, 27, 27, 14, 30, 30, 35, 2, 35, 12, 36, 21, 7, 18, 20, 26, 29, 1, 32, 26, 24, 8, 25, 17, 12, 18, 20, 37, 33, 31, 20, 25, 3, 28, 31, 0, 1, 18, 20, 25, 34, 15, 0, 14, 1, 35, 25, 11, 24, 23, 4, 1, 25, 2, 9, 33, 12, 25, 35, 25, 1, 23, 28, 30, 12, 25, 18, 27, 31, 22, 33, 30, 34, 22, 36, 0, 12, 34, 33, 23, 12, 22, 12, 33, 35, 18, 17, 2, 20, 37, 34, 2, 22, 33, 29, 37, 21, 15, 33]
    tree_split_xor_mask = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    cat_features_index = []
    one_hot_cat_feature_index = []
    one_hot_hash_values = [
    ]
    ctr_feature_borders = [
    ]

    ## Aggregated array of leaf values for trees. Each tree is represented by a separate line:
    leaf_values = [
        0.0008211111193150276, 0, 0.0002249999959287899, 0, 0.001252702682193469, 0, 0.0003937499928753823, 0, 0.000989974279526389, 0.001679999969601631, 0.000647499988283962, 0, 0.0007328258582250274, 0, 0.001145454524728385, 0, 0.0008999999837151595, 0, 0, 0, 0, 0, 0, 0, 0.001374999961815775, 0, 0, 0, 0.001399999974668026, 0, 0.0005249999905005097, 0, 0.001039998001456305, 0, 0.002099999962002039, 0.001259999977201223, 0.001890090150245136, 0.002099999962002039, 0.002390476385184691, 0.00347205903071033, 0.001214583574654528, 0.0004199999924004077, 0.001259999977201223, 0.003790092530154747, 0.001781553489653492, 0.002363889468771702, 0.002231249959627166, 0.003923684268934943, 0, 0, 0, 0, 0.002604545391452584, 0, 0, 0, 0, 0, 0, 0, 0.00275191166696851, 0.002099999962002039, 0, 0,
        0.0007538577474999657, 0, 0.001673253488408078, 0.002738652127683553, 0.0002184838828884162, 0, 0.0008825505085869145, 0, 0.0003120346099853925, 0, 0.00158349975932882, 0.003739948724389159, 0, 0, 0, 0,
        0.0006933509312799082, 0.0003807448079259477, 0, 0, 0.0002253647442558727, 0.0006258405236297229, 0, 0, 0, 0.001542142630457226, 0, -4.210890275908136e-05, 0, 0.001673184539486385, 0, 0, 0.001272012748052926, 0.001649286949424068, 0.0004909987480076855, 0.0008279255283937593, 0.001028341203512161, 0, 0.001342365235159006, 0, 0, 0.001531596916887485, 0, 0.002994130776486581, 0, 0.001712509390425219, 0, 0.002790524526621693, 0.0006856069686816815, 0.0002617542854675017, 0, 0, 0, 0, 0, 0, 0, 0.0006349163803912631, 0, 0, 0, 0, 0, 0, 0, -1.673249773309539e-05, 0.004842408306584823, -5.747724616521417e-05, 0, 0, 0, 0.0009935246728542616, 0, 0.000496389368247837, 0, 0.003538370511604812, 0, 0, 0, 0.001170746134705661,
        0.0009993793451929835, 0.0006472428625660188, 0.002054819460530633, 0.0008454782179630871, 0, 0, 0, 0, 0.001569461454959776, 0.0006880886836232464, 0.002602597344848702, 0.0006870979334488626, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -6.072504143975329e-05, 0, 0.00229936094780811, 0, -8.293172039469818e-05, 0, -9.716006630360528e-05, 0, 0.0007363992298561145, 0.0006085269865621679, 0.0005143379977692408, 0.0008557028876432862, 0, 0, 0, 0, 0.001430650333530159, 0.0004390146338997656, 0.002364938416543263, 0.001224482735163515, -0.0001914852822629667, 0, 0.004297496584515503, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0007279271646716647, 0, 0.001469642920822631, 0, 0.004333706516532492, 0, 0.003590815261682832, 0,
        0.0005018915988676306, 0, 0, 0, 0, 0, 0, 0, 0.001019106162970893, 0.002158636158929221, 0.0001744854063570518, 0, 0.0007036940277868124, 0.0002100135778176525, 0, 0, 0.0008193003605062954, 0, 0.0006511486151858343, 0, 0, 0, 0, 0.0009634283593827508, 0.001754513443514755, 0.003606056464236659, 0.0009721761244360406, 0.002346130686338674, 0.002410793999610905, 0.002495847817708386, 0.0007994711444081085, 0.001133976767210599,
        0.000895344931318472, 0, 0.0001383978792981598, 0, 0.001390594070553242, 0, 0.001095906315124533, -4.438493637335684e-05, 0, 0, 0, 0, 0, 0, 0, 0, 0.0009436415068187995, 0, 1.796538631548385e-05, 0, 0.001700885640848615, 0, 0.0008392646478876406, 0.001199266370230588, 0.0003188267608434701, 0.00170185843572702, 0, 0, 0.0005660760918241027, 0.0006213302845897906, 0, -6.983229220410984e-05, 0, 0, 0, 0, 0.001396531943268455, 0, 0.0006932049603857591, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.002543324929667959, 0, 0.0008855587949451098, 0.001411504613994294, 0, 0, 0, 0, 0.003275522427622679, 0.003147387792408076, 0.001519862091468061, 0.002873518301339001,
        0.0005990936443043667, 0.0005141210850662032, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0009981954810317944, 0.00113285364026703, 0, 0.002529226010323915, 0.001715404347819678, 0, 0, 0.0009344038741327417, 0.001763855543237187, 0.002577421580693694, 0, 0.003403236879093157, -0.0001417297293604732, 0, 0, 0.0009321322584780502,
        0.0002592553540084264, 0.0002814820991340837, 0.001199399509019085, 0.000225282347475402, 0.0006809843539056827, 9.004792476144384e-05, 0.00144819863789422, 0.001751752223632969, 0.001206222441960861, 0.001641427849350564, 0.0009958377202596586, 0.000567273874147416, 0.0006471055171902875, 0.0001443893924914438, 0.001432215699729718, 0.002498084579869076, 0, 0, 0, 0, 0, 0, 0, 0, -0.0001250206879972504, 0.003191486075147698, 0.0006114514751352554, 0.002106694693614403, 0.0009215104361924571, 0.001656341065952057, 0.002164075791553834, 0.00320836590834006, 0, 0, 0, 0, 0.001276256624652246, 0, 0.0009764391337639501, 0, 0, 0, 0, 0, 0, 0, 0.0003411184213620479, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001482029689543291,
        0.00118820125272422, 0.002968091358727136, 0.0006778414250965857, -8.264792925567401e-05, 0.0009285213075175198, 0, 0.0007205452321756449, 0, 0.001444628879181826, 0.001997711697016514, 0.0004234110761428951, 4.562975963680338e-05, 0.001975114045297121, 0.002602413571627491, 0.0001128039938886671, 0.001099695510901395, 0, 0, 0, 0, 0.0003584813081258037, 0, 0, 0, 0, 0, 0, 0, 0.002295014373903618, 0.003183456681395813, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0008502633449835477, 0, 0, 0, 0.001039695909678065, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001928455571993601, 0.004379034147344535, 0, 0,
        0.0006701048564886307, -3.948621661136432e-07, 0, 0, 0.001852625053904861, 0, 0, 0, 0.0004357526162026019, -0.0001031701057339633, -0.0001243267942096384, -5.876761384309457e-05, 0.0008602039062312418, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00088225364163858, 0, 0, 0, 0, 0, 0, 0, 0.001948279359399888, 0.001640752790140138, -9.239315356651928e-05, 0.0009354539652698771, 0.001598777444316427, 0.002190335990578424, 0, 0, 0.0005941548970149107, 0.0008859159254437867, -6.452515271246485e-05, 0.001932457455498864, 0.001904329834984267, 0.000488078780447396, 0, 0, 0.003091078413472633, 0.00659729573014665, 0, 0, 0.0008243525756745073, 0.002522799086830022, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0.0008488260527628323, 0, 0.000873848901513031, 0, 0.0001194417247735377, 0, 0.001188896494839977, 0, 0.001182052755295839, 0.001738402847102977, 0.0005625175032087761, 0.001984630585352368, 0.0009042924355633799, 0.001422951830556627, 0.002303363516692562, 0.004739675547914935, 0, 0, 0, 0, 0, 0, 0, 0, -8.110958650387445e-05, 0.000817046213307624, 0, 0, 0, 0, 0, 0, 0.0003275186366693249, 0, 0, 0, 0.001362433011062271, 0, 0.0008709494038297803, 0, 0.001096358506155346, 0.0009672425723277348, 0.00169468234656305, 0.001985943384826736, 0.00242707940139672, 0.000902089027907646, 0.00397044668347927, 0.00274750064171221, 0, 0, 0, 0, 0, 0, 0, 0, 9.532269636498559e-05, 0.0009622850117556506, 0.0008756367394741899, 0, 0, 0, 0, 0,
        0.0005040055309239926, 0, 0, 0, 0, 0, 0, 0, 0.0009732411702215784, 0.0001699068796534523, -0.0001551776760483141, 0, 0.001719444470893405, 0.003416855305981231, 0.0002636780353668345, 0.001363213182741114, 0, 0, 0, 0, 0, 0, 0, 0, 0.001764357375545972, 0, -1.607518676901062e-05, 0, 0.0008329000674406454, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001387717375462168, 0.0006707265178714665, 0.00110425284950711, 0, 0.002339074832584351, 0.003035600861508068, 0.001677539091044471, 0.001612288420495297, 0, 0, 0, 0, 0, 0, 0, 0, 0.00104264435720553, 0, 0.002019836270062129, 0.0003555138721144734, 0.0006075395583725832, 0.004518692956139356, 0.00140181171958792, 0.002434690184000343,
        0.001220847415929478, 0.002099527162808153, 0, 0, 0, 0, 0, 0, 0.0006632548036521005, 0.003169836729854807, 0, 0, 0, 0, 0, 0, 0.0002707109431176412, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001272331658494283, 0.002347774299367084, 0, 0, 0.00079501718104056, 0.002379171526273865, 0.0009454993989899525, 0.0008508092881030678, 0.0003823082262853555, 0.004173099776425674, 0, 0, 0.0006922161411008662, 0.002382563904290665, 0, 0, 0.0005855897084618943, 0, 0, 0, -6.571752267553591e-06, 0.0007787313691881657, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0.000434716053203272, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0004918013908467227, 0, 0, 0, 0, 0, 0, 0, 0.0005160523579367441, 0.001364096936113112, 0.00110133745895767, 0.0003183331348500862, 0.002185790508722134, 0.002304023166596317, 0, 0.001267749868920999,
        0.0004681672855142182, 0.0004317143275376674, 0.0006974791063304968, 0.0006956038413988918, 0, 0, 0.001244397205540101, 0.0012862843811935, 0, 0, 0.001707243423110904, 0.002729996948081148, 0, 0, 0.002605098803921517, 0.002777304668220266, -0.0001576357364411587, 0, 0.001630081885021312, 0, 0, 0, 0.002242015835597755, 0, 0, 0, 0, 0, 0, 0, 0.001862034386823032, 0, 0.0004335135350034608, 0, 0.0001690329650000191, -7.507621534225157e-05, 0, 0, 0.0006717726192983769, 0, 0, 0, -0.0001374431953905177, 0.001182164626187078, 0, 0, 0.0007414101140558089, 0.002052332701223743, -0.0001254362994349518, 0, 0, 0, 0, 0, 0.001656324074015618, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0.0007584606145153756, 0.00165456614792398, 6.35442464155929e-05, 0.0006310931149412408, 0.00302964682004383, 0.0002006481658289933, 0.005056835631578462, 0.001578220382855967, 0.000948341210863237, 0.003035226138815425, 0.001354811420513454, 0.001705604742846135, 0.0007214604888711001, 0.0002267680623229583, 0.001706601042016637, 0.00230414063428667, 0.0004333016424812974, 0, 0, -0.0001430017748477028, 0, 0, 0, 0, 0.001712672753894065, 0.0008048445684622038, -0.0001390963739172696, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.004208480175643117, 0, 0.003242030140359175, 0.0006787776081848432, 0, 0, 0, 0, 0, 0.0006684894008683127, 0.001558159010698219, 0.001763047262228448, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0.0006017884598699877, 0.00104541243321528, 0.0004932511568391316, 0.002602925518063445, 0.001490239319598945, 0, 0, 0, 0.0002560068722514378, 0, -0.0001111058632671914, 0, 0, 0, 0, 0, 0.000631970486233448, 0, 0.0007912136077059977, 0.001681221562932592, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0008287215037723925, 0.002412313056679476, 0.0005958736608099796, 0.002516771747595521, 0.0006705711220283796, 0, 0, 0, 0.002278336732276447, 0.00023801442165647, 0.001927195949600862, 0.001418440143478259, -0.0002239859301572204, 0, 0, 0, 0.0009778914331626419, 0.001189149474922913, 0.000642884961490966, 0.002116350540341554, 0, 0.0007988082343336597, 0, 0.0007973820643812385, 0.0002323849844032793, 2.83706130207828e-05, 0, 0.0004433631928790208, 0, 0, 0, 0,
        0.0006680385419198862, 0.001527554811924918, 6.797537208740043e-05, -0.0003041471397463479, 0.0003817071668503455, 0, -9.431284988014423e-05, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0005843345116543431, 0.002509270503882448, 0.0003640877510179198, 0.001905322698853856, 0.001396559551324738, 0, 0.0007343514022622624, 0, 0, 0.0004505521441140549, 0.0003223619729794473, 0, 0.001945029570237105, 0, 0.0006898665377041182, 0, 0.0008823993610707926, 0, 0, 0, 0.001778713646247642, 0, 0.0004306135949088973, 0, 0, 0, 0, 0, 0, 0, 0.001232768786872989, 0, 0.0001449290890340778, 0.001355928239422817, 8.737935124941928e-05, -0.0002571239866024547, 0.001428972756589119, 0, 0.0001319305131296939, 0, 0.000877123555697903, 0.001504531854939595, 0.001081654584242608, -0.0001770110238412852, 0.002529400984575662, 0, 0.001609043914357355, 0,
        0.0009776610652877749, 0, 0.0003345149426549306, 0.0003744985257947664, -0.0002446104090079699, 0, 0.001169496779039261, 0, 0.0002788439116865993, 0.0001000580638542267, 0.0004634227802791094, 6.177730210005004e-05, 0, 0, 0.001213301008732822, 0.002197062831540777, -0.0002200675421056912, -0.0001074912220677713, 0.0004861119207952095, -0.000231590659894808, -0.0001756834411921493, 0, 0.0006698382839116226, 0.0008774493402844266, 0.001183097481579959, 0.001895170710738859, 0.001425876629167842, 0.001661422832417429, 0.0003994659719717067, 0, 0.001068477761287054, 0.002620716170939284,
        -2.713949030532732e-05, 0.0003501093661338588, 0, 0, 0, 0, 0, 0, 0.001467378291526571, 0.0008787585028953496, 0.00202029148386955, 0, 0, 0, 0, 0, 0, -0.0001471627779178832, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0006760552083167317, 0.0002010971803971928, 0.002498177173556698, 0.001273084440836008, 0, -0.0001130408937274284, 0.0009042779791340287, 0.0007719725064138874, 0.001392433493641456, 0.0008645224541347769, 0.001936480812851738, 0.0006237306647546432, 0, 0.0001371068845763815, 0, 0.000859255273799616, 0, 0.0003153514261733585, 0, 0, 0, 0, 0, 0, 0, 0.001795204299178731, 0, 0.0004995976024383724, 0, 0, 0, 0,
        0.0004382580489547775, 0.001085236239975705,
        0.0006803289070039923, 0, 0.001405003926296399, 0, 0.0003484003839811317, 0.001752247279177061, 0, 0.001198677532608097, -0.0002625107149546998, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0009479542803999424, 0.001742536919625054, -1.04989388198494e-05, -0.0001581935700534585, 0, 0, 0, 0, -0.0003273257479784161, 0, 0, 0, -0.0001151143415499577, 0, 0, 0, 0, 0.0007580434411273043, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0006975931754835262, 0.0008893566228242239, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0.0002963011774120134, 0, 0.0002331610322669415, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001031568992983413, 0, 0.000820845364053601, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0004126612164699144, 0, 0.0005661649011793947, 0.001738385266990315, 0, 0, 0, 0, 0, 0, 0.0009025889682221288, 0.001885220031054559, 0, 0, 0.001506097042996568, 0.00070415877828966, 0.001318255586466756, 0, 0.00153340979614705, 0.001342386500164069, 0, 0, 0, 0, 0, 0, 0.0003995387651587204, 0.00272427667585424, 0, 0, 0.0008493146170177944, 0.001486109084478497,
        0.0008238059635710864, 0.001060495407522618, 0, 0, 0, 0.005835465234099391, 0, 0, 0, 0.0007436980872288994, 0, 0.0006018190327291684, 0, 0.001006415474927078, 0, 0.0005770264039903791, 0.0005464927099353763, 0.0009620731104500227, 0, 0, 0, 0.001539853759998924, 0, 0, 0, 0.001710604575567493, 0, 0.001947826412161279, 0, 0.001305967015874518, 0, 0.003010587880498728, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.002405603689670554, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.001249174580240228, 0, 0, 0, 0.003480887537456767,
        0.0004968589799872719, -0.0004716729388242498, 0.0001496091264425591, 0, -0.0003191282987527724, 0, 0.0001099240243573268, 0, 0.000645668343462299, 0.0002598481113506791, 0.001189966147889322, 0.001036519070621221, 0.0006037501476730326, -0.0001934820471262411, 0.0001811399059414273, 0.001326861461891608, 0.002332362540229179, -0.0001477582252004562, -0.0001918468465656646, 0.0002911286956444526, 0, 0, 0, 0, 0.001889800516217275, 0.001287359197631322, 0.002145876313045638, 0.002210724619297184, 0.0002771797307829861, 0, 0.002031410836970499, 0,
        0.0002601065481241164, 0.0004905175135422832, 0.001324036171568899, 0.001833541256817273, 0, 8.751626164751575e-06, 0, 5.96776252657687e-05, 0.001578987307083576, 0.00231413690770401, 0.0009637049790623212, 0.001912556056400994, 0, 0, 0, 0.000611713733043578, 0.0003100110407936268, 0.001454461875723135, 0.0008943654521609091, 0.0005840486167499893, -0.0003359481832061942, 0, 6.351962458138146e-05, 0.0004324940450942799, 0.001303947590653262, 0.0004964388854070506, 0.001417004562586186, 0.00346932844315738, 0, 0, 0, 0, 0, -0.000147194898211439, 0, 0.0002967439147698129, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2.788327723309099e-05, 0.000858750022282925, -0.0001932766582656721, 0.0008278690009700863, 0, 0, 0, 0, 0.0007220465913899319, 0, 0, 0, 0, 0, 0, 0,
        0.0007386355307227873, 0, -0.0001580434655052579, -0.0003686428414135694, 0.0007418381989599766, 0, 0, 0.0001599748586006474, 0, 0, 0, 0, -0.0001350864587604646, 0, 0, 0, 0.0004952869637479078, 0, -0.0001160139294138149, 0.0001801448547430673, 0.0004804910625311506, 0.0006947091303359506, 8.615715942174787e-05, 0.001716970262759787, -0.0003342206034014745, 0, 0, 0, -0.0002398809703704178, 0, 0, 0, 0.0007998104427251608, -0.0001625175122467764, -0.0002379388259103192, -0.000953686481228043, 3.323360247301698e-07, 0, -0.0002673659891468555, 0.002032064640957667, 0.0003141326004891445, 0, 0, 0, -0.0001203249441353257, 0, -0.000194044310831932, 0, 0.001027692938753491, 0.001692895162404853, 0.0008429910642879086, 0.002415697064033725, 0.001059680101295332, 0.001218291640040929, 0.001488187104612596, 0.001916530794089995, 0.0004417135357377558, 0.0002577448564287369, -0.0002481373454491097, 0, 0.0003292920782703804, 0.001351454720899577, 0.0002064838416876673, 0.001448264726254947,
        0.0003137695717466545, 0, 0, 0, 0.0001761235470925751, 0, 0.0003255505919981959, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0004524912872570299, 0.0006179600622962247, -0.0002444056554169648, 0, 0.0004934475764067059, 0.001951565471598478, 0.0002238457900235352, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.000488948730609489, 0.001123849522347526, 0.001137407044930767, -0.0004233863022804082, 0.0008274499195840716, 0.001267999558387022, 0.002089373119226198, 0.002007878756670108, 0, 0, 7.041893560824197e-05, 0, 0, 0, -7.716990312149853e-07, 0.00117424380043777,
        -0.0001065304602529199, 0, 5.091249859571021e-05, 0.001552201023551789, -0.0003519740273766925, 0, 0.0008231515087684696, -0.0001538612494422717, 0, 0, -7.12434876853867e-05, -0.0002536432071476668, 0.00035832182677465, 0, -0.0001060383399573919, 0, -0.0004108038684627914, 0, 0.0005702211104911443, 0.0001678501827298103, 0.0006029041678799524, 0, 0.001207679386939485, 0.001577074855534091, -0.0001402881544685649, 0, -8.573889517141379e-06, 0.001335738179789048, 0.001330011393130548, 0, 0.0004297814956785778, 0.00235537089494633,
        -0.0001691718009773306, 0.0007404552110038422, -0.0003330696670123624, 0, -0.000413425686030416, 0, 0, 0, 0.0002961837180654108, 0.001815328615136658, -0.0002850048078502031, 0, -0.0002823749202761314, 0, 0, 0, 0, 0, -0.0004674597208406766, 0, -0.0001918419903758985, 0, -0.0001878040092032015, 0, -0.0001249895651571101, 0, 0.0002392316974094061, 0, 0, 0, 0, 0, 0.0006036515944300075, 0.0006983106978376668, 6.940638581705346e-05, 0, -0.0005091551382171139, 0, 0, 0, 0.0007469985992151485, 0.001172565322701541, -0.0002290565427784179, 0.001275757904086294, -0.0004987406330513939, 0, 0, 0, 0.0004595215215228083, -0.0002750104244044048, 0.001006662399523967, 0.000450893845417335, 0.0001075995580165785, 0, 7.79447303187248e-05, 0, 0.0008008746879968941, 0.0009731029638571203, 0.0009219410687492992, 0.002272369325934798, 0.0001824992208356341, 0, 0.001221093799621103, 0,
        0.0002428065365655648, 0, 0.000599800875177284, 0, -0.0003420324238832106, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3.750951142959749e-05, 0, 0.0002353955677240234, 0.001896662691313298, 0.0004040658261881871, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0006237947162286517, 0, 0.0008403512232477467, 0.00144542523940671, 0.001723641390397188, 0, 0.000123228286910707, 0.001110072898007987, 0.0004162937132924794, 0, 0.000819260393128802, 0.001903768126418651, 0.002721740429284112, 0, 0.001093709132837858, 0.0003433047642164318,
        -8.643274757308733e-05, 0, 0, 0, 0.0007700526427092087, 0, 0.001407682569025965, 0, 0.000292685612768204, 0, 0, 0, 0, 0, 0, 0, 0.0004170481062597905, 0.001364649073304131, 0.0005642904774389725, 0.001783465069225195, 0.0006829764304831297, 0.0009368701197879335, 0.001668350904591899, 0.001527730964442825, -1.888622018275935e-05, -7.401609748898491e-05, 0, 0, 2.689710726533785e-05, -0.0001007266333519334, 0.000703892943035708, 0.0002885740793215313, -0.0001243334647688188, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0004212932256249816, 0, 0, 0, 0, -0.0002214529213932792, 0, 0, 0.001126059906510341, 0, 0, 0, 0, 0, 0, 0,
        0.0006812058995968081, 0.0007823417471890294, 0.002198579595952981, 0.001938205152648976,
        0.0001770993074398822, 0, 0, 0, -6.069751480954389e-05, 0, 0.0007899875379257943, 0, 0.0002599422168784262, 0.0002691586234569753, 0, 0, 9.671360080263527e-05, 0.001321145689896648, 0.0006286624333532495, 0.001495566674667885,
        0.0005881233163147908, 0.0008948591841949425, -0.0002731026111760512, 0, 0, -9.096959418518402e-05, 0, 0, 0.0003063141190819693, 0.0006309510094571711, 0.0002120831993582824, 9.184508100081083e-05, 0, 0, 0, 0, 0, 0.001308159825882835, 0, 0, 0, 0.0009265806951439092, 0, 0, 0, 0.0005778424633020395, 0, 0.0002703723488359639, 0, 0.002064281869956052, 0, 0, 0, 0.0009957137525116897, 0, 0, 0, 0.0007373061149353685, 0, 0, 0, 0.0005942476805933206, 0, -0.0001455668053056538, 0, 0.0009636369796530296, 0, 0.0004823170406583951, 0, 0, 0, 0, 0, 0.001069917275263828, 0, 0, 0, 0, 0, 0, 0, 0.003197137443610142, 0, 0.001654057794858728,
        -0.0001452243686419085, 0.0001099430860756596, 0, 0.000279916306425296, 0, 0.0005524086420284394, 0, -0.0002407910940861206, 0, 0.0001291620092518085, 0, 0.0001067511014227487, 0, 0, 0, 0, 0, 0.0001550749581474067, 0, 0.0005006605130561697, 0, 0.0001187428378552273, 0, 4.47184045394336e-05, 0, -0.0003486000182065134, 0, -0.0003384524301485561, 0, -0.0002420493426502292, 0, 0.0008562170367445839, 0, 0, 0, 0, 0, 0.0001679012269872068, 0, 0, 0.0008389988506887772, 9.607805582748034e-05, 0.001269440066592496, 0.0005896887055215867, -0.0002510968411973535, 0.0004561933596730354, 0.004099121598108118, 0.0005339706397935527, 0, 0, 0, 0, 0, 0.001547591296352612, 0, 0.0007657157239412887, 0, -0.0002398694911536195, 0, 0.0005198279244419523, 0, -0.0003310630091433706, 0, 0.001209362403995271,
        -0.0002006388106399326, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0002844087705967667, 0.002622952575726506, 0, 0, 0, 0, 0, 0, 0.001079066524949637, 0.0004786088010776321, 0, 0, 0.0009917498253695564, 0, 0, 0, -4.738050536428387e-05, 0.0004127095478334236, 0.000623536799557855, -0.000133627564065638, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0006047038092067997, 0.0002050096453224402, 2.366119736991551e-05, 0.0005714430326648559, 0, 0, 0, 0.002760685007804145, 0.001168541888240006, 0.001575171524860401, 0.000666526329831985, 0.001547132672943898, -0.0004151805805872115, 0, 0.001021564101272479, 0.0002617453817460858,
        0.0004599995205167785, 0.0008061992399606286, 0, 0, 0.0008334516842546594, 0.0009886801430702007, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -5.016516759659776e-06, 1.167325582345625e-05, 0.0002734933490838007, 0.0002695376127145215, 0.0004392683939963417, 0.0006239759279585417, 0.0002988408354218394, 0.0007984834516330642, 0, 0, 0, 0, 0, 0, 0, 0, -0.0001167281882581807, 1.363464093876292e-05, 0, 0, 0.0007061629997082383, 0.001599112628083959, 0, 0, 0, 0.003884423423474178, 0, 0, 0, 0.0009980206557695427, 0, 0, -0.0004623044603816833, 5.628688847194573e-06, 0, 0, -0.0002938798365865209, 0.002820104391048083, 0, 0, 0, 0.003593293350250389, 0, 0, 0, 0.0007108449009457164, 0, 0,
        0.0006934128529592625, 0, 0.0001981282559378848, -0.0004545431615591975, 0.000368799556528122, -0.0005046889360421538, 0.0003721070867259324, 0.0008977982070154355, 0.002057751192313768, -0.0002566154753764186, -0.0001024184966083503, 0, 3.159500045415083e-05, -0.0002585596126987125, 0.0006560725245100014, 0.0005630894085803047, 0, 0, 0, 0.0007185812216500484, 0, 0, 0, -0.0001234998935578484, 0, 0, 0, 0, 0, 0, 0, 0.0002912760959055267, -0.0003169837293710951, 0, 1.615726272610201e-05, -1.072438517366411e-05, -0.0006186584532156912, -0.0006062737693968884, 0.0001771957233141167, 0.0009349950055223749, 0, 0, 0.000779551430739719, 5.454690945940978e-05, 0.000828328052282169, 0.0001010200291553687, 0.001117398755651502, 0.0008202612947333086, 0, -0.0004297224955010604, 0, -0.0006316318360832933, 0, 0.002519970873140914, 0, 0.001773443202026981, 0, 8.388749542291308e-05, 0, 0.003546125975213669, 0, -4.762902558082296e-05, 0, 0.001789127465353027,
        0.0001366925295795637, 0, 0.0002428934919993975, 0, 0.000154645042644706, 0, 0.001009995495334518, 0, -0.0001408801292090598, 0, 0, 0, 0.0001722599011330907, 0, -0.0003416246986813073, 0, -0.0001385739394904953, 0, -0.000233011854228716, 0, -0.0006202518855286006, 0, -0.0004373615125483905, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0006629835808417871, 0, -0.0002964990421996882, 0, 0.0005462572505344188, 0.001370739120020601, 0.0006394763708098213, 0.0005586949624901891, 0.001000280034964808, 0, 0, 0, 0.0009255407408645211, 0.0009487117985927429, 0.001268812064157855, -0.0002562886104745367, 0.000743864252631796, 0, 0, 0, 2.966663128397522e-05, 0.0007144780652536676, 0.0001026156064294276, 0.0006545189400019837, 0, 0, 0, 0, 0, 0, 0, 0
    ]
cat_features_hashes = {
}

def hash_uint64(string):
    return cat_features_hashes.get(str(string), 0x7fFFffFF)


### Applicator for the CatBoost model

def apply_catboost_model(float_features, cat_features=[], ntree_start=0, ntree_end=catboost_model.tree_count):
    """
    Applies the model built by CatBoost.

    Parameters
    ----------

    float_features : list of float features

    cat_features : list of categorical features
        You need to pass float and categorical features separately in the same order they appeared in train dataset.
        For example if you had features f1,f2,f3,f4, where f2 and f4 were considered categorical, you need to pass here float_features=f1,f3, cat_features=f2,f4


    Returns
    -------
    prediction : formula value for the model and the features

    """
    if ntree_end == 0:
        ntree_end = catboost_model.tree_count
    else:
        ntree_end = min(ntree_end, catboost_model.tree_count)

    model = catboost_model

    assert len(float_features) >= model.float_feature_count
    assert len(cat_features) >= model.cat_feature_count

    # Binarise features
    binary_features = [0] * model.binary_feature_count
    binary_feature_index = 0

    for i in range(len(model.float_feature_borders)):
        for border in model.float_feature_borders[i]:
            binary_features[binary_feature_index] += 1 if (float_features[model.float_features_index[i]] > border) else 0
        binary_feature_index += 1
    transposed_hash = [0] * model.cat_feature_count
    for i in range(model.cat_feature_count):
        transposed_hash[i] = hash_uint64(cat_features[i])

    if len(model.one_hot_cat_feature_index) > 0:
        cat_feature_packed_indexes = {}
        for i in range(model.cat_feature_count):
            cat_feature_packed_indexes[model.cat_features_index[i]] = i
        for i in range(len(model.one_hot_cat_feature_index)):
            cat_idx = cat_feature_packed_indexes[model.one_hot_cat_feature_index[i]]
            hash = transposed_hash[cat_idx]
            for border_idx in range(len(model.one_hot_hash_values[i])):
                binary_features[binary_feature_index] |= (1 if hash == model.one_hot_hash_values[i][border_idx] else 0) * (border_idx + 1)
            binary_feature_index += 1

    if hasattr(model, 'model_ctrs') and model.model_ctrs.used_model_ctrs_count > 0:
        ctrs = [0.] * model.model_ctrs.used_model_ctrs_count;
        calc_ctrs(model.model_ctrs, binary_features, transposed_hash, ctrs)
        for i in range(len(model.ctr_feature_borders)):
            for border in model.ctr_feature_borders[i]:
                binary_features[binary_feature_index] += 1 if ctrs[i] > border else 0
            binary_feature_index += 1

    # Extract and sum values from trees
    result = 0.
    tree_splits_index = 0
    current_tree_leaf_values_index = 0
    for tree_id in range(ntree_start, ntree_end):
        current_tree_depth = model.tree_depth[tree_id]
        index = 0
        for depth in range(current_tree_depth):
            border_val = model.tree_split_border[tree_splits_index + depth]
            feature_index = model.tree_split_feature_index[tree_splits_index + depth]
            xor_mask = model.tree_split_xor_mask[tree_splits_index + depth]
            index |= ((binary_features[feature_index] ^ xor_mask) >= border_val) << depth
        result += model.leaf_values[current_tree_leaf_values_index + index]
        tree_splits_index += current_tree_depth
        current_tree_leaf_values_index += (1 << current_tree_depth)
    return result



